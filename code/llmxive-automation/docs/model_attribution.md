# Model Attribution System

The llmXive automation system includes a comprehensive model attribution system that tracks and credits all contributions made by different language models.

## Overview

Since all GitHub operations use the user's credentials, model contributions would otherwise appear as if they were made by the human user. The attribution system solves this by:

1. **Tracking all model contributions** in a local JSON file
2. **Adding attribution comments** to GitHub issues/PRs created by models
3. **Generating attribution reports** showing model contributions over time
4. **Maintaining detailed statistics** about each model's contributions

## How It Works

### 1. Automatic Tracking

When a model performs any task that creates GitHub content, the system automatically:

```python
# In task_executor.py
self.attribution.add_contribution(
    model_id=self.conv_mgr.model_name,
    task_type="BRAINSTORM_IDEA",
    contribution_type="idea",
    reference=f"issue-{issue.number}",
    metadata={"field": field, "idea_id": idea_id}
)
```

### 2. Attribution Comments

Each GitHub issue/PR created by a model receives an attribution comment:

```markdown
## ðŸ¤– Model Attribution

This contribution was generated by: **TinyLlama-1.1B-Chat-v1.0**

### Model Details
- Full Model ID: `TinyLlama/TinyLlama-1.1B-Chat-v1.0`
- Task Type: `BRAINSTORM_IDEA`
- Timestamp: `2025-07-04T11:51:51.802311`
- Total Contributions by this model: 1

### Additional Information
- Field: environmental science
- Idea ID: environmental-science-20250704-001

---
*Tracked by llmXive Model Attribution System*
```

### 3. Data Storage

Attribution data is stored in `model_attributions.json`:

```json
{
  "models": {
    "TinyLlama/TinyLlama-1.1B-Chat-v1.0": {
      "first_contribution": "2025-07-04T11:51:51.801759",
      "total_contributions": 1,
      "contributions_by_type": {
        "idea": 1
      }
    }
  },
  "contributions": [
    {
      "id": "TinyLlama-TinyLlama-1.1B-Chat-v1.0_20250704_115151",
      "model_id": "TinyLlama/TinyLlama-1.1B-Chat-v1.0",
      "task_type": "BRAINSTORM_IDEA",
      "contribution_type": "idea",
      "reference": "issue-28"
    }
  ]
}
```

## Usage

### Generate Attribution Report

```bash
python scripts/generate_attribution_report.py
```

This creates a markdown report showing:
- Summary statistics for all models
- Contributions broken down by type
- Recent contributions timeline
- Detailed model statistics

### View Model Statistics Programmatically

```python
from src.model_attribution import ModelAttributionTracker

tracker = ModelAttributionTracker()
stats = tracker.get_model_stats("TinyLlama/TinyLlama-1.1B-Chat-v1.0")
print(f"Total contributions: {stats['total_contributions']}")
```

## Supported Contribution Types

The system tracks these contribution types:

- **idea**: Brainstormed research ideas
- **design**: Technical design documents
- **code**: Code implementations
- **review**: Reviews (design, code, paper)
- **documentation**: Documentation updates
- **analysis**: Data analysis results
- **visualization**: Figures and plots
- **paper**: Paper sections (abstract, intro, etc.)

## Implementation Details

### ModelAttributionTracker Class

Located in `src/model_attribution.py`, this class provides:

- `add_contribution()`: Record a new contribution
- `get_model_stats()`: Get statistics for a specific model
- `format_attribution_comment()`: Generate GitHub comment
- `generate_attribution_report()`: Create full markdown report
- `get_recent_contributions()`: Get recent activity

### Integration Points

Attribution tracking is integrated at these points:

1. **Task Executor**: After successful task completion
2. **GitHub Handler**: When creating issues/PRs
3. **CLI**: Reports can be generated on demand

## Benefits

1. **Transparency**: Clear record of which model generated what content
2. **Credit**: Models receive proper attribution for their work
3. **Analysis**: Track model performance and contribution patterns
4. **Compliance**: Helps with AI transparency requirements
5. **Research**: Data on model capabilities and specializations

## Future Enhancements

Potential improvements:

1. Web dashboard for visualizing contributions
2. Model leaderboards by contribution type
3. Export to citation formats (BibTeX, etc.)
4. Integration with paper acknowledgments
5. Contribution quality metrics